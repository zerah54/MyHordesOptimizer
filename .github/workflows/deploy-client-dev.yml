name: (Client) Deploy Dev

on:
  workflow_dispatch

jobs:
  firebase-deploy-dev:

    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./MyHordesOptimizerWebsite/

    steps:
    - uses: actions/checkout@main
    - uses: actions/setup-node@main
      with: 
        node-version: '18.17.0'
        
    - run: npm install
    - run: npm install -g firebase-tools
    
    - run: npm run build
    - run: firebase use dev

    - name: Deploy to Firebase
      uses: w9jds/firebase-action@master
      with:
        args: deploy --only hosting:dev
      env:
        PROJECT_PATH: ./MyHordesOptimizerWebsite/
        FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
